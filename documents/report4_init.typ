#import "lib.typ": *

#set footnote(numbering: (..args) => {
  args.pos().at(0) * "†"
})

#let custom-title-page() = {
  set align(center)
  set block(width: 100%, height: 100%)
  set text(weight: "regular", size: 55pt, font: "STZhongSong")
  
  v(1fr)
  [实验报告]
  // v(2fr)
}

#let custom-title-page-author()={
  // v(1.1fr)
  set align(center)
  set block(width: 100%, height: 100%)
  set text(weight:"regular", size: 18pt, font: "KaiTi")
  v(0.6fr)
  [北京航空航天大学 沈元学院]
  v(0.1fr)
  [实验样例]
  v(1.5fr)
}

// 使用自定义封面
#custom-title-page()

#custom-title-page-author()

#pagebreak()

#show: project.with(
  title: "实验4  线性稳压器",
  date: auto,
)

== 声明

本实验所涉及器材、预报告仅限我组同学使用.更多内容详见http://github.com/PurineAcO/Model-Elec

== 注意

别直接抄,用自己的话把内容加工一遍.

= 实验目的

1. 了解线性稳压器的结构和应用方法;
2. 验证线性稳压器的性质;
3. 练习全流程的电子器件设计;
4. 熟练焊接技巧.

= 实验原理



== 集成运放电路


#figure(
  image("image-5.png",width: 60%),
  caption: [集成运放电路示意图],
)<tu1>

@tu1 所示的集成运放电路,共有3个端口,分别为同相输入端$P$,反相输入端$N$,输出端$O$.

集成运放具有"*虚短*"的性质,即当运放工作在*负反馈*时,有$u_P=u_N$.这是因为理想运放的放大倍数趋于无穷.

集成运放具有"*虚断*"的性质,有$i_P=i_N=0$.这是因为理想运放的输入网络电阻趋于无穷.

由以上两个性质,可以推出各类性质,如@tu2 所示的电压跟随器.

#figure(
  image("image-6.png",width: 80%),
  caption: [电压跟随器],
)<tu2>

由于$i_N=0$,所以$u_N=u_O$,由于$u_P=u_N$,所以$u_P=u_O$,这样输出电压将一直跟随输入电压而不随着负载的变化而变化.

在电压跟随器的基础上,通过对"跟随电压"的采样和放缩,得到了具有比例放大的电路.

#figure(
  image("image-7.png",width: 50%),
  caption: [同相比例放大电路],
)<tu3>

如@tu3 所示,根据$i_N=i_P=0,u_N=u_P$,有:

$ (u_O-u_N)/R_f=u_N/R $

进而有:
#math.equation(
  $ u_O=u_I (1+R_f/R) $,
  block: true,
  numbering: "(1)",
)<e1>


#figure(
  image("image-8.png",width: 50%),
  caption: [反相比例放大电路],
)<tu4>

如@tu4 所示,根据$i_N=i_P=0,u_N=u_P$,有:

$ (u_I-u_N)/R=(u_N-u_O)/R_f $

以及

$ u_N=u_P=0+i_p R=0 $

得到:

#math.equation(
  $ u_O=-u_I R_f/R $,
  block: true,
  numbering: "(1)",
)<e2>

== LM317 线性稳压器

#figure(
  image("image-9.png",width: 50%),
  caption: [LM317 线性稳压器],
)<tu5>

如@tu5 所示,LM317 线性稳压器是一种常用的线性稳压器.对其电路图进行分析,首先排除掉用于增强带载能力的两个三极管和过热过流模块.

接口INPUT用于为运放供高电平,运放的低电平和OUTPUT公用.按上一段的说法进行简化后,整个器件相当于一个电压跟随器,如@tu6 所示.

#figure(
  image("image-10.png",width: 60%),
  caption: [LM317 线性稳压器简化电路图],
)<tu6>

由于ADJ最终接地,一般情况下,$u_P$总高于1.25V,使稳压管工作在反向击穿区间,稳定在1.25V压降.按照@tu7 构造外电路,就形成了比例稳压器.

根据电压关系有:

$ u_O (R_2/(R_1+R_2))+1.25=u_O $

得到:
#math.equation(
  $ u_O=1.25 (1+R_2/R_1) $,
  block: true,
  numbering: "(1)",
)<e3>


#figure(
  image("image-11.png",width: 80%),
  caption: [LM317 线性稳压器简化外电路],
)<tu7>

下面考虑极限情况,当$R_2/R_1$较大时,如果继续维持线性关系,将会发生溢出.此时,输出电压将会和输入电压维持1.25V的压降.这是由于电压跟随器P端口无限趋近于输入电压INPUT,而OUT和ADJ永远和P端口维持1.25V压降.如当INPUT=12V时,通过调节$R_1$和$R_2$的比例,可以使输出电压向上趋近10.75V左右.


= 实验设计

本节涉及到的*设计流程*均需要在实验报告中加以阐述.

== 电路图

#figure(
  image("image-12.png",width: 80%),
  caption: [实验电路及某情形下的仿真结果#footnote[软件:嘉立创EDA 6.5.51]],
)<tu8>

=== 原理图设计

如@tu8 所示,实验电路中我们设计了7个滤波电容,来对交流成分和高频纹波进行输入、输出两端的滤波,除此之外,还设计了防止断电冲击的二极管保护电路.

如果电路正常运行,应当可以在上一路的OUTPUT端得到合乎@e3 的电压,下一路的OUTPUT端得到近似5V的电压.#footnote[在后续的任务中,LM 317的应用是更为广泛的,所以本文做了详细的阐释,但是LM 7805一是结构十分复杂,二是后续的应用不在主导,故未用篇幅加以详细解释.]

=== 参数选择

上述滤波器件和保护器件(电容、二极管)均参考LM 317和LM 7805数据手册的推荐数值.
经计算@e3 ,为了能够更加准确的体现线性性质和饱和情形,我们选择电位器的最大阻值为2k$Omega$.

为了电路的安全,输入的电压不应超过最大输入电压25V,对于主要的数据取值,应该倾向于在15V左右.

== 电路仿真

选取输入电压为12V,得到下表的结果:

#show table: three-line-table 
#figure(
  table(
      columns: 8,
      [阻率#footnote[指的是当前阻值和电位器总电阻比值] (%)], [输出(V)], [阻率(%)], [输出(V)],[阻率(%)], [输出(V)],[阻率(%)], [输出(V)],
      [1],[1.512],[5],[2.562],[10],[3.874],[15],[5.185],
      [20],[6.495],[25],[7.805],[30],[9.113],[35],[10.421],
      [40],[10.782],[45],[10.786],[50],[10.788],[55],[10.790],
      [60],[10.792],[70],[10.795],[80],[10.798],[90],[10.800],
  ),
  caption: [仿真结果]
)<biao1>

#figure(
  image(".\Group1\untitled.svg",width: 80%),
  caption: [仿真结果图像],
)<tu9>

根据@biao1 所示,绘制数据点和线性区域的图像,如@tu9 所示.在一定的预期放大倍率内,输出电压基本符合线性规律.实际工作时,应当尽量使得器件在此工况下.

== PCB制版

#figure(
  image("image-13.png",width: 80%),
  caption: [工程图],
)<tu10>

#figure(
  image("image-14.png",width: 80%),
  caption: [PCB 板图],
)<tu11>

最终按照工程图@tu10 进行PCB 制版,得到如@tu11 所示的PCB 板图,最终形成@tu12 的立体效果.

#figure(
  image("image-15.png",width: 80%),
  caption: [3D 效果],
)<tu12>

= 实验步骤

== 焊板

1. 按照上文所指的电路图,进行焊接.*(预计9日也就是周四下午能到,如果确认到不了,我会亲自去海淀黄庄买,然后使用实验室的绿色板子自己焊.)*
2. 遵循先低后高原则,3D图纸已经显示的很明显了.这个板子画的很匆忙,*所以焊接时候要特别注意元件方向,最好对着上面的3D图焊.*

== 上电

给右上角的那个黑色电源座上电,如果有能用的电缆就直接用,如果不能用就用鳄鱼夹,或者直接飞线.*这个插座反了,一定要注意插的时候不要损坏.*如果都不行,*可以使用下面的蓝色插排,但是要注意板子上标的正负极,这个方法不是首选.*

先上低电压,*打开开关*,看看红灯亮不亮,如果红灯正常亮,再进行接下来的测试.

== 测数

1. 观察蓝灯、绿灯是否亮,如果不亮说明有问题.
2. 给电压从5\~20V变动看P3电压是否稳定在5V左右.

3. 用螺丝刀拧动电位器,看P2输出电压是否符合@e3 .(长柄电位器没货了,辛苦大家用手拧.)

4. 从P2引出,加各种电阻负载,看电压是否符合@e3 以测试带载能力.(最好用电位器,但是需要管别人借,如果没有,可以用多个定值电阻电阻替代.)

5. 记录实验2,3,4数据,并进行可视化.

= 写在最后

这个实验很重要,是接下来可编程电源的一种重要原型机,请大家务必重视.

在抄报告的时候,请大家有选择的抄.这是一个教程性质的文档,不要把它当成最终的报告.有条件的可以自行搭建嘉立创或者Mutisim进行进一步仿真.